<div class="center-section">
  <section class="text-center text-lg-start">
    <div class="container w-75 mt-3">
      <div class="row g-0">
        <div class="mb-2 mb-lg-0 justify-content-center">
          <div class="card cascading-right" style="
              background: hsla(0, 0%, 100%, 0.55);
              backdrop-filter: blur(30px);
            ">
            <div class="card-body p-5 shadow-5">
              <h2 class="fw-bold text-center mb-4">
                {{ 'Update' | translate }}
              </h2>
              <form [formGroup]="updateFormGroup" class="w-100">
                <div formGroupName="user" class="form-area">
                  <div class="row" (ngSubmit)="handleUpdateUser()">

                    <div class="col-md-6 mb-3">
                      <div class="form-floating mb-1">
                        <input formControlName="firstName" type="text" class="form-control" id=""
                          placeholder="First Name" />
                        <label for="">{{ 'FirstName' | translate }}</label>
                      </div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <div class="form-floating mb-1">
                        <input formControlName="lastName" type="text" class="form-control" id=""
                          placeholder="Last Name" />
                        <label for="">{{ 'LastName' | translate }}</label>
                      </div>
                    </div>
                  </div>

                  <div *ngIf="checkifAdmin()">

                    <div class="form-floating mb-4">
                      <select class="form-select mb-4" formControlName="role" [ngClass]="{
                            'is-invalid':
                              role.invalid && (role.dirty || role.touched)
                          }">
                        <option disabled>{{ 'RoleSelect' | translate }}</option>
                        <option value="user">{{ 'User' | translate }}</option>
                        <option value="admin">{{ 'Manager' | translate }}</option>
                      </select>
                      <label for="">{{ 'Roles' | translate }}</label>
                    </div>
                  </div>

                  <div class="form-floating mb-4">
                    <input formControlName="email" type="text" class="form-control" id="" placeholder="name@example.com"
                      [ngClass]="{
                        'is-invalid':
                          email.invalid && (email.dirty || email.touched)
                      }" />
                    <label for="">{{ 'Username' | translate }}</label>
                    <div *ngIf="email.invalid && (email.dirty || email.touched)" class="invalid-feedback">
                      <div *ngIf="email.errors?.['required']">
                        {{ 'UsernameVal1' | translate }}
                      </div>
                      <div *ngIf="email.errors?.['minlength']">
                        {{ 'UsernameVal2' | translate }}
                      </div>
                      <div *ngIf="email?.pending">Loading</div>

                      <div *ngIf="email.errors?.['usernameAlreadyExists'] && !email?.pending">
                        {{ 'UsernameVal3' | translate }}
                      </div>
                      <div *ngIf="email?.pending">Loading...</div>
                    </div>
                    <div class="available" *ngIf="email.valid && !email?.pending">
                      âœ“ {{ 'UsernameVal4' | translate }}
                    </div>
                  </div>

                  <div class="form-floating mb-4">
                    <input formControlName="password" type="password" class="form-control" id="" placeholder="Password"
                      [ngClass]="{
                        'is-invalid':
                          password.invalid && (password.dirty || password.touched)
                      }" />
                    <label for="">{{ 'Password' | translate }}</label>
                    <div *ngIf="
                      password.invalid && (password.dirty || password.touched)
                    " class="invalid-feedback">
                      <div *ngIf="password.errors?.['required']">
                        {{ 'PasswordVal1' | translate }}
                      </div>
                      <div *ngIf="password.errors?.['minlength']">
                        {{ 'PasswordVal2' | translate }}
                      </div>
                    </div>
                  </div>
                  <button (click)="handleUpdateUser()" type="submit" class="btn btn-green mb-4" style="width: 100%"
                    [disabled]="updateFormGroup.invalid">
                    <mat-spinner *ngIf="loading" class="spinner" color="accent" mode="indeterminate" diameter="25"
                      style="text-align: center; display: inline-block"></mat-spinner>
                    <span *ngIf="!loading">{{ 'Update' | translate }}</span>
                  </button>
                  <button type="button" class="btn btn-secondary" style="width: 100%" (click)="closeModal()">
                    {{ 'Cancel' | translate }}
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>